{"id":"ec1105d1-69ad-41de-9c8b-737bc5975397","name":"ChatQnA Flow 4","flowData":{"nodes":[{"name":"chat_input","version":1,"category":"Controls","inMegaservice":false,"inputAnchors":[],"inputParams":[],"inputs":{},"outputs":{},"outputAnchors":[{"id":"chat_input_0-output-chat_input-ChatCompletionRequest","name":"chat_input","label":"ChatCompletionRequest","description":"User Input from Chat Window","type":"ChatCompletionRequest"}],"id":"chat_input_0"},{"name":"doc_input","version":1,"category":"Controls","inMegaservice":false,"inputAnchors":[],"inputParams":[],"inputs":{},"outputs":{},"outputAnchors":[{"id":"doc_input_0-output-doc_input-UploadFile","name":"doc_input","label":"UploadFile","description":"User Input from Document Upload","type":"UploadFile"}],"id":"doc_input_0"},{"name":"opea_service@prepare_doc_redis_prep","version":1,"category":"Data Preparation","inMegaservice":false,"dependent_services":{"tei":{"modelName":"","huggingFaceToken":""}},"inputs":{"doc_input":"{{doc_input_0.data.instance}}","modelName":"BAAI/bge-large-en-v1.5","huggingFaceToken":""},"inputAnchors":[{"label":"Documents","name":"doc_input","type":"UploadFile","id":"opea_service@prepare_doc_redis_prep_0-input-doc_input-UploadFile"}],"inputParams":[{"label":"Model Name","name":"modelName","type":"string","default":"BAAI/bge-large-en-v1.5","id":"opea_service@prepare_doc_redis_prep_0-input-modelName-string"},{"label":"HuggingFace Token","name":"huggingFaceToken","type":"password","optional":true,"id":"opea_service@prepare_doc_redis_prep_0-input-huggingFaceToken-password"}],"outputs":{},"outputAnchors":[{"id":"opea_service@prepare_doc_redis_prep_0-output-opea_service@prepare_doc_redis_prep-EmbedDoc","name":"opea_service@prepare_doc_redis_prep","label":"EmbedDoc","description":"Data Preparation with redis using Langchain","type":"EmbedDoc"}],"id":"opea_service@prepare_doc_redis_prep_0"},{"name":"opea_service@embedding_tei_langchain","version":1,"category":"Embeddings","inMegaservice":true,"dependent_services":{"tei":{"modelName":"","huggingFaceToken":""}},"inputs":{"textToEmbed":"{{chat_input_0.data.instance}}","modelName":"BAAI/bge-large-en-v1.5","huggingFaceToken":""},"inputAnchors":[{"label":"Text To Embed","name":"textToEmbed","type":"TextDoc|EmbeddingRequest|ChatCompletionRequest","id":"opea_service@embedding_tei_langchain_0-input-textToEmbed-TextDoc|EmbeddingRequest|ChatCompletionRequest"}],"inputParams":[{"label":"Model Name","name":"modelName","type":"string","default":"BAAI/bge-large-en-v1.5","id":"opea_service@embedding_tei_langchain_0-input-modelName-string"},{"label":"HuggingFace Token","name":"huggingFaceToken","type":"password","optional":true,"id":"opea_service@embedding_tei_langchain_0-input-huggingFaceToken-password"}],"outputs":{},"outputAnchors":[{"id":"opea_service@embedding_tei_langchain_0-output-opea_service@embedding_tei_langchain-EmbedDoc|EmbeddingResponse|ChatCompletionRequest","name":"opea_service@embedding_tei_langchain","label":"EmbedDoc","description":"Text Embedding Inference using Langchain","type":"EmbedDoc | EmbeddingResponse | ChatCompletionRequest"}],"id":"opea_service@embedding_tei_langchain_0"},{"name":"opea_service@retriever_redis","version":1,"category":"Retreiver","inMegaservice":true,"dependent_services":{"tei":{"modelName":"","huggingFaceToken":""}},"inputs":{"text":"{{opea_service@embedding_tei_langchain_0.data.instance}}","vector_db":"{{redis_vector_store_0.data.instance}}","modelName":"BAAI/bge-base-en-v1.5","huggingFaceToken":"","search_type":"similarity"},"inputAnchors":[{"label":"Search Query","name":"text","type":"EmbedDoc|RetrievalRequest|ChatCompletionRequest","id":"opea_service@retriever_redis_0-input-text-EmbedDoc|RetrievalRequest|ChatCompletionRequest"},{"label":"Redis Vector Store","name":"vector_db","type":"EmbedDoc","id":"opea_service@retriever_redis_0-input-vector_db-EmbedDoc"}],"inputParams":[{"label":"Model Name","name":"modelName","type":"string","default":"BAAI/bge-base-en-v1.5","id":"opea_service@retriever_redis_0-input-modelName-string"},{"label":"HuggingFace Token","name":"huggingFaceToken","type":"password","optional":true,"id":"opea_service@retriever_redis_0-input-huggingFaceToken-password"},{"label":"Search Type","name":"search_type","type":"options","default":"similarity","options":[{"name":"similarity","label":"similarity"},{"name":"similarity_distance_threshold","label":"similarity_distance_threshold"},{"name":"similarity_score_threshold","label":"similarity_score_threshold"},{"name":"mmr","label":"mmr"}],"optional":true,"additionalParams":true,"inferenceParams":true,"id":"opea_service@retriever_redis_0-input-search_type-options"}],"outputs":{},"outputAnchors":[{"id":"opea_service@retriever_redis_0-output-opea_service@retriever_redis-SearchedDoc|RetrievalResponse|ChatCompletionRequest","name":"opea_service@retriever_redis","label":"SearchedDoc","description":"Redis Retreiver with Langchain","type":"SearchedDoc | RetrievalResponse | ChatCompletionRequest"}],"id":"opea_service@retriever_redis_0"},{"name":"redis_vector_store","version":1,"category":"VectorStores","inMegaservice":true,"inputs":{"prepared_doc":"{{opea_service@prepare_doc_redis_prep_0.data.instance}}"},"inputAnchors":[{"label":"Prepared Documents","name":"prepared_doc","type":"EmbedDoc","id":"redis_vector_store_0-input-prepared_doc-EmbedDoc"}],"inputParams":[],"outputs":{},"outputAnchors":[{"id":"redis_vector_store_0-output-redis_vector_store-EmbedDoc","name":"redis_vector_store","label":"EmbedDoc","description":"Redis Vector Store","type":"EmbedDoc"}],"id":"redis_vector_store_0"},{"name":"opea_service@reranking_tei","version":1,"category":"Reranking","inMegaservice":true,"dependent_services":{"tei":{"modelName":"","huggingFaceToken":""}},"inputs":{"retreived_docs":"{{opea_service@retriever_redis_0.data.instance}}","modelName":"BAAI/bge-reranker-base","huggingFaceToken":"","top_n":1},"inputAnchors":[{"label":"Documents","name":"retreived_docs","type":"SearchedDocs|RerankingRequest|ChatCompletionRequest","id":"opea_service@reranking_tei_0-input-retreived_docs-SearchedDocs|RerankingRequest|ChatCompletionRequest"}],"inputParams":[{"label":"Model Name","name":"modelName","type":"string","default":"BAAI/bge-reranker-base","id":"opea_service@reranking_tei_0-input-modelName-string"},{"label":"HuggingFace Token","name":"huggingFaceToken","type":"password","optional":true,"id":"opea_service@reranking_tei_0-input-huggingFaceToken-password"},{"label":"Top N","name":"top_n","type":"number","default":1,"optional":true,"additionalParams":true,"inferenceParams":true,"id":"opea_service@reranking_tei_0-input-top_n-number"}],"outputs":{},"outputAnchors":[{"id":"opea_service@reranking_tei_0-output-opea_service@reranking_tei-LLMParamsDoc|RerankingResponse|ChatCompletionRequest","name":"opea_service@reranking_tei","label":"LLMParamsDoc","description":"TEI Reranking","type":"LLMParamsDoc | RerankingResponse | ChatCompletionRequest"}],"id":"opea_service@reranking_tei_0"},{"name":"opea_service@llm_tgi","version":1,"category":"LLM","inMegaservice":true,"dependent_services":{"tgi":{"modelName":"","huggingFaceToken":"NA"}},"inputs":{"text":"{{opea_service@reranking_tei_0.data.instance}}","modelName":"Intel/neural-chat-7b-v3-3","huggingFaceToken":"","max_tokens":17,"top_k":10,"top_p":0.95,"typical_p":0.95,"temperature":0.01,"presence_penalty":1.03,"frequency_penalty":"","streaming":true,"chat_template":"### You are a helpful, respectful and honest assistant to help the user with questions.\n### Context: {context}\n### Question: {question}\n### Answer:"},"inputAnchors":[{"label":"LLM Params Document","name":"text","type":"LLMParamsDoc|ChatCompletionRequest|SearchedDoc","id":"opea_service@llm_tgi_0-input-text-LLMParamsDoc|ChatCompletionRequest|SearchedDoc"}],"inputParams":[{"label":"Model Name","name":"modelName","type":"options","default":"Intel/neural-chat-7b-v3-3","options":[{"name":"Intel/neural-chat-7b-v3-3","label":"Intel/neural-chat-7b-v3-3"},{"name":"Llama-2-7b-chat-hf","label":"Llama-2-7b-chat-hf"},{"name":"Llama-2-70b-chat-hf","label":"Llama-2-70b-chat-hf"},{"name":"Meta-Llama-3-8B-Instruct","label":"Meta-Llama-3-8B-Instruct"},{"name":"Meta-Llama-3-70B-Instruct","label":"Meta-Llama-3-70B-Instruct"},{"name":"Phi-3","label":"Phi-3"}],"id":"opea_service@llm_tgi_0-input-modelName-options"},{"label":"HuggingFace Token","name":"huggingFaceToken","type":"password","optional":true,"id":"opea_service@llm_tgi_0-input-huggingFaceToken-password"},{"label":"Maximum Tokens","name":"max_tokens","type":"number","default":17,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-max_tokens-number"},{"label":"Top K","name":"top_k","type":"number","default":10,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-top_k-number"},{"label":"Top P","name":"top_p","type":"number","default":0.95,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-top_p-number"},{"label":"Typical P","name":"typical_p","type":"number","default":0.95,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-typical_p-number"},{"label":"Temperature","name":"temperature","type":"number","default":0.01,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-temperature-number"},{"label":"Presence Penalty","name":"presence_penalty","type":"number","default":1.03,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-presence_penalty-number"},{"label":"Frequency Penalty","name":"frequency_penalty","type":"number","default":0,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-frequency_penalty-number"},{"label":"Streaming","name":"streaming","type":"boolean","default":true,"optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-streaming-boolean"},{"label":"Chat Template","name":"chat_template","type":"string","rows":true,"default":"### You are a helpful, respectful and honest assistant to help the user with questions.\n### Context: {context}\n### Question: {question}\n### Answer:","optional":true,"additionalParams":true,"id":"opea_service@llm_tgi_0-input-chat_template-string"}],"outputs":{},"outputAnchors":[{"id":"opea_service@llm_tgi_0-output-opea_service@llm_tgi-GeneratedDoc|StreamingResponse|ChatCompletion","name":"opea_service@llm_tgi","label":"GeneratedDoc","description":"LLM Text Generation Inference","type":"GeneratedDoc | StreamingResponse | ChatCompletion"}],"id":"opea_service@llm_tgi_0"},{"name":"chat_completion","version":1,"category":"Controls","inMegaservice":false,"inputs":{"llm_response":"{{opea_service@llm_tgi_0.data.instance}}"},"hideOutput":true,"inputAnchors":[{"label":"LLM Response","name":"llm_response","type":"ChatCompletion","id":"chat_completion_0-input-llm_response-ChatCompletion"}],"inputParams":[],"outputs":{},"outputAnchors":[],"id":"chat_completion_0"}]},"deployed":false,"isPublic":false,"apikeyid":null,"chatbotConfig":null,"apiConfig":null,"analytic":null,"speechToText":null,"category":null,"type":"OPEA","sandboxStatus":null,"createdDate":"2024-10-07T16:29:51.000Z","updatedDate":"2024-10-07T16:32:21.000Z"}